---
driver:
  name: vagrant

provisioner:
  name: chef_zero
  chef_omnibus_install_options: -d /tmp/vagrant-cache/vagrant_omnibus

platforms:
<%
platforms = [
  {
    name: 'ubuntu-12.04-pristine',
    box: 'opscode-ubuntu-12.04',
    box_url: 'https://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_ubuntu-12.04_chef-provisionerless.box'
  }, {
    name: 'ubuntu-12.04-mchx',
    box: 'u12-04-04032015',
    box_url: 'http://tools1.sad.marchex.com:8898/vm_images/u12-04-04032015.box'
    }, {
    name: 'centos-6.6',
    box: 'opscode-centos-6.6',
    box_url: 'https://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-6.6_chef-provisionerless.box'
    }
]

platforms.each do |platform|
  %w(11.16.4 latest).each do |chef_version| %>
  - name: <%= platform[:name] %>-<%= chef_version %>
    driver_config:
      provision: true
      box: <%= platform[:box] %>
      box_url: <%= platform[:box_url] %>
      require_chef_omnibus: <%= chef_version %>
      vagrantfiles:
        - test/shared/vagrant_cache_omnibus.rb
<%
  end
end %>

suites:
  - name: default
    run_list:
      - recipe[<%= cookbook_name %>::default]
    attributes:
